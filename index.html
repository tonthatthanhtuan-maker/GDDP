<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YOLOv11 - Menu Dataset</title>
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
  <style>
    body {
      background-color: #0d1117;
      color: #e6edf3;
      font-family: "Segoe UI", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      margin: 0;
    }
    h2 { margin-bottom: 15px; color: #58a6ff; text-align: center; font-size: 1.1rem; }
    .menu { display: flex; gap: 10px; margin-bottom: 20px; }
    .menu button {
      padding: 10px 20px;
      background-color: #238636;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }
    .menu button:hover { background-color: #2ea043; }
    .menu button.active { background-color: #1f6feb; }

    .main-container {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      max-width: 1000px;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      background-color: #161b22;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
      flex: 1 1 600px;
      width: 100%;
      box-sizing: border-box;
    }
    canvas {
      border: 3px solid #58a6ff;
      border-radius: 10px;
      width: 100%;
      height: auto;
      max-width: 800px;
    }
    button.detect {
      background-color: #238636;
      border: none;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.2s;
      width: 100%;
      max-width: 320px;
    }
    button.detect:hover { background-color: #2ea043; }
    input[type="file"] {
      width: 100%;
      max-width: 320px;
      color: #e6edf3;
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 8px;
    }
    #resultBox {
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
      width: 100%;
      text-align: left;
      box-sizing: border-box;
    }
    .label-item {
      margin-bottom: 8px;
      padding: 8px;
      border-left: 4px solid #00ff99;
      background: #161b22;
      border-radius: 6px;
    }
    .label-name { color: #00ff99; font-weight: bold; }
    .desc { color: #ccc; font-size: 14px; }

    .info-panel {
      background-color: #161b22;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
      padding: 20px;
      width: 300px;
      flex: 1 1 280px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      box-sizing: border-box;
    }
    .info-panel h3 {
      color: #58a6ff;
      text-align: center;
      margin-bottom: 10px;
      font-size: 1rem;
    }
    .info-item {
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 8px;
      font-size: 15px;
    }
    .info-item span { color: #00ff99; }

    .product-desc {
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 10px;
      margin-top: 10px;
      min-height: 80px;
      color: #ccc;
      font-size: 14px;
      white-space: pre-wrap;
    }
    .product-desc-label {
      color: #58a6ff;
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
      font-size: 0.95rem;
    }

    @media (max-width: 768px) {
      .main-container { flex-direction: column; align-items: center; }
      .info-panel, .container { width: 100%; max-width: 95vw; }
      canvas { width: 100%; }
    }
  </style>
</head>
<body>
  <h2>üåø STEM v√† s·ª©c kh·ªèe h·ªçc ƒë∆∞·ªùng ƒë∆∞·ª£c kh∆°i ngu·ªìn t·ª´ t√°ch chi·∫øt c√°c h·ª£p ch·∫•t t·ª± nhi√™n ‚Äì s√°ng t·∫°o v√¨ m·ªôt th·∫ø h·ªá xanh (11A16)</h2>
  <div class="menu">
    <button id="btnRan" class="active">ü™® R·∫Øn</button>
    <button id="btnLong">üíß L·ªèng</button>
  </div>

  <div class="main-container">
    <div class="container">
      <input type="file" id="imageInput" accept="image/*" />
      <button id="detectBtn" class="detect">üöÄ Ti·∫øn h√†nh nh·∫≠n di·ªán</button>
      <canvas id="canvas"></canvas>
      <div id="resultBox">üîç Ch∆∞a c√≥ k·∫øt qu·∫£ nh·∫≠n di·ªán.</div>
    </div>

    <div class="info-panel">
      <h3>üìä Th√¥ng tin m√¥ h√¨nh</h3>
      <div class="info-item">Dataset hi·ªán t·∫°i: <span id="datasetName">R·∫Øn</span></div>
      <div class="info-item">S·ªë v·∫≠t th·ªÉ ph√°t hi·ªán: <span id="objectCount">0</span></div>
      <div class="info-item">ƒê·ªô tin c·∫≠y cao nh·∫•t: <span id="confidence">--%</span></div>
      <div class="info-item">Nh√£n v·∫≠t th·ªÉ ch√≠nh: <span id="objectLabel">--</span></div>
      <div class="info-item">Th·ªùi gian x·ª≠ l√Ω: <span id="processTime">-- ms</span></div>

      <div>
        <span class="product-desc-label">üìñ M√¥ t·∫£ s·∫£n ph·∫©m:</span>
        <div class="product-desc" id="productDesc">üëâ H√£y nh·∫≠p ·∫£nh c·ªßa b·∫°n ƒë·ªÉ ti·∫øn h√†nh nh·∫≠n di·ªán.</div>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const detectBtn = document.getElementById("detectBtn");
    const imageInput = document.getElementById("imageInput");
    const resultBox = document.getElementById("resultBox");
    const confidenceEl = document.getElementById("confidence");
    const objectCountEl = document.getElementById("objectCount");
    const objectLabelEl = document.getElementById("objectLabel");
    const processTimeEl = document.getElementById("processTime");
    const datasetName = document.getElementById("datasetName");
    const btnLong = document.getElementById("btnLong");
    const btnRan = document.getElementById("btnRan");
    const productDesc = document.getElementById("productDesc");

    let img = new Image();
    let session;
    let labels = [];

    let currentModel = "merged_model_ran.onnx";
    let currentClasses = "classes_ran.txt";

    // ‚úÖ M√¥ t·∫£ m·∫∑c ƒë·ªãnh theo Dataset
    const defaultDescRan =
      "üß™ D·ªãch chi·∫øt t·ª´ g·ª´ng c√≥ m√†u v√†ng nh·∫°t ƒë·∫øn v√†ng ƒë·∫≠m, m√πi th∆°m ƒë·∫∑c tr∆∞ng. " +
      "Ch·ª©a nhi·ªÅu ho·∫°t ch·∫•t sinh h·ªçc nh∆∞ gingerol v√† shogaol, gi√∫p ch·ªëng vi√™m, kh√°ng khu·∫©n v√† tƒÉng c∆∞·ªùng mi·ªÖn d·ªãch. " +
      "Th∆∞·ªùng ƒë∆∞·ª£c ·ª©ng d·ª•ng trong th·ª±c ph·∫©m ch·ª©c nƒÉng, m·ªπ ph·∫©m thi√™n nhi√™n v√† y h·ªçc c·ªï truy·ªÅn."
      + "N·∫øu ƒë√¢y l√† th√¥ng tin c√≥ nghƒ©a r·∫±ng ch√∫ng m√¨nh ch∆∞a c·∫≠p nh·∫≠t, c·∫£m ∆°n c√°c b·∫°n ƒë√£ s·ª≠ d·ª•ng h·ªá th·ªëng";

    const defaultDescLong =
      "üíß ƒê√¢y l√† m√¥ t·∫£ c·ªßa c√°c s·∫£n ph·∫©m d·∫°ng l·ªèng. B·∫°n c√≥ th·ªÉ ghi c√¥ng d·ª•ng, c√°ch d√πng ho·∫∑c ƒë·∫∑c ƒëi·ªÉm nh·∫≠n d·∫°ng.";

    const descDefaultGuide = "üëâ H√£y nh·∫≠p ·∫£nh c·ªßa b·∫°n ƒë·ªÉ ti·∫øn h√†nh nh·∫≠n di·ªán.";

    // ‚úÖ M√¥ t·∫£ ri√™ng theo nh√£n
// ‚úÖ M√¥ t·∫£ ri√™ng theo nh√£n
const labelDescriptions = {
  "gung": 
    "üåø G·ª´ng t∆∞∆°i c√≥ m√πi th∆°m cay n·ªìng ƒë·∫∑c tr∆∞ng, ch·ª©a nhi·ªÅu ho·∫°t ch·∫•t gingerol v√† shogaol gi√∫p tƒÉng c∆∞·ªùng mi·ªÖn d·ªãch, h·ªó tr·ª£ ti√™u h√≥a v√† kh√°ng vi√™m.",

  "nuoc gung":
    "üß™ D·ªãch chi·∫øt g·ª´ng l√† dung d·ªãch c√≥ m√†u v√†ng nh·∫°t ƒë·∫øn v√†ng ƒë·∫≠m, c√≥ m√πi th∆°m cay n·ªìng ƒë·∫∑c tr∆∞ng c·ªßa g·ª´ng. " +
    "ƒê√¢y l√† ch·∫ø ph·∫©m thu ƒë∆∞·ª£c t·ª´ c·ªß g·ª´ng t∆∞∆°i th√¥ng qua qu√° tr√¨nh chi·∫øt b·∫±ng dung m√¥i nh∆∞ ethanol, methanol ho·∫∑c n∆∞·ªõc. " +
    "Th√†nh ph·∫ßn ch√≠nh c·ªßa d·ªãch chi·∫øt g·ª´ng g·ªìm gingerol, shogaol v√† zingerone ‚Äî nh·ªØng h·ª£p ch·∫•t c√≥ t√°c d·ª•ng sinh h·ªçc m·∫°nh.\n\n" +

    "üåø 1. ƒê·∫∑c ƒëi·ªÉm c·∫£m quan:\n" +
    "- M√†u s·∫Øc: v√†ng nh·∫°t ‚Üí v√†ng ƒë·∫≠m.\n" +
    "- M√πi: th∆°m cay n·ªìng ƒë·∫∑c tr∆∞ng.\n" +
    "- Tr·∫°ng th√°i: d·∫°ng l·ªèng, c√≥ th·ªÉ h∆°i ƒë·ª•c nh·∫π.\n" +
    "- pH: h∆°i axit (5.5‚Äì6.5).\n\n" +

    "üß™ 2. Th√†nh ph·∫ßn ho·∫°t ch·∫•t:\n" +
    "- Gingerol: ho·∫°t ch·∫•t ch√≠nh, ch·ªëng oxy h√≥a m·∫°nh.\n" +
    "- Shogaol: h√¨nh th√†nh khi ƒëun n√≥ng, tƒÉng hi·ªáu l·ª±c sinh h·ªçc.\n" +
    "- Zingerone: t·∫°o m√πi th∆°m d·ªãu, c√≥ t√°c d·ª•ng kh√°ng khu·∫©n.\n\n" +

    "üíä 3. C√¥ng d·ª•ng:\n" +
    "- Kh√°ng vi√™m, kh√°ng khu·∫©n, ch·ªëng oxy h√≥a m·∫°nh.\n" +
    "- H·ªó tr·ª£ ti√™u h√≥a, gi·∫£m ƒë·∫ßy h∆°i, bu·ªìn n√¥n.\n" +
    "- TƒÉng tu·∫ßn ho√†n m√°u, gi·∫£m ƒëau t·ª± nhi√™n.\n" +
    "- H·ªó tr·ª£ ƒëi·ªÅu h√≤a mi·ªÖn d·ªãch.\n\n" +

    "üè≠ 4. ·ª®ng d·ª•ng:\n" +
    "- Trong th·ª±c ph·∫©m: l√†m h∆∞∆°ng li·ªáu t·ª± nhi√™n, b·∫£o qu·∫£n th·ª±c ph·∫©m.\n" +
    "- Trong m·ªπ ph·∫©m: t·∫°o m√πi th∆°m, t√°c d·ª•ng th∆∞ gi√£n, l√†m ·∫•m.\n" +
    "- Trong y h·ªçc c·ªï truy·ªÅn v√† d∆∞·ª£c ph·∫©m: ƒëi·ªÅu tr·ªã c·∫£m l·∫°nh, ho, vi√™m kh·ªõp.\n\n" +

    "‚öóÔ∏è 5. Ph∆∞∆°ng ph√°p chi·∫øt:\n" +
    "- Chi·∫øt dung m√¥i (ethanol, n∆∞·ªõc,‚Ä¶)\n" +
    "- Chi·∫øt si√™u √¢m, chi·∫øt vi s√≥ng ƒë·ªÉ tƒÉng hi·ªáu su·∫•t.\n" +
    "- Ki·ªÉm so√°t nhi·ªát ƒë·ªô v√† th·ªùi gian ƒë·ªÉ t·ªëi ∆∞u ho·∫°t ch·∫•t.\n\n" +

    "üßä 6. B·∫£o qu·∫£n:\n" +
    "- Nhi·ªát ƒë·ªô th·∫•p (4‚Äì8 ¬∞C), tr√°nh √°nh s√°ng.\n" +
    "- C√≥ th·ªÉ th√™m ch·∫•t ch·ªëng oxy h√≥a t·ª± nhi√™n (vitamin E, acid citric).\n\n" +

    "‚ö†Ô∏è 7. L∆∞u √Ω:\n" +
    "- C√≥ th·ªÉ g√¢y k√≠ch ·ª©ng nh·∫π v·ªõi da nh·∫°y c·∫£m.\n" +
    "- Ki·ªÉm tra ƒë·ªô tinh khi·∫øt v√† n·ªìng ƒë·ªô tr∆∞·ªõc khi s·ª≠ d·ª•ng.\n" +
    "- Ph∆∞∆°ng ph√°p chi·∫øt ·∫£nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn hi·ªáu su·∫•t v√† ch·∫•t l∆∞·ª£ng.\n\n" +

    "‚úÖ 8. K·∫øt lu·∫≠n:\n" +
    "D·ªãch chi·∫øt g·ª´ng l√† nguy√™n li·ªáu t·ª± nhi√™n qu√Ω gi√°, ch·ª©a nhi·ªÅu ho·∫°t ch·∫•t sinh h·ªçc, c√≥ ·ª©ng d·ª•ng r·ªông r√£i trong th·ª±c ph·∫©m, m·ªπ ph·∫©m v√† y h·ªçc c·ªï truy·ªÅn. " +
    "ƒê√¢y l√† m·ªôt trong nh·ªØng ch·∫ø ph·∫©m t·ª´ th·ª±c v·∫≠t c√≥ ti·ªÅm nƒÉng cao trong nghi√™n c·ª©u v√† ·ª©ng d·ª•ng c√¥ng nghi·ªáp xanh.",

  "Blue solution": "üåä Dung d·ªãch c√≥ m√†u xanh lam ƒë·∫∑c tr∆∞ng...",
  "Brick red ppt": "üß± K·∫øt t·ªßa m√†u ƒë·ªè g·∫°ch...",
  "cam": "üçä Qu·∫£ cam t∆∞∆°i, gi√†u vitamin C...",
  "CCLA": "üß™ Dung d·ªãch th·ª≠ nghi·ªám Clorua canxi...",
  "CCMA": "üß™ Dung d·ªãch ph·∫£n ·ª©ng trung gian...",
  "chanh": "üçã Tr√°i chanh t∆∞∆°i, v·ªã chua t·ª± nhi√™n...",
  "Chlorine Dioxide Kit": "üß™ B·ªô dung d·ªãch th·ª≠ ClO2 d√πng trong x·ª≠ l√Ω n∆∞·ªõc...",
  "dau": "üåø D·∫ßu thi√™n nhi√™n, m√†u v√†ng nh·∫°t, kh√¥ng tan trong n∆∞·ªõc...",
  "dich chiet cam": "üçä D·ªãch chi·∫øt cam ch·ª©a flavonoid, tinh d·∫ßu...",
  "dich chiet dau": "üåø D·ªãch chi·∫øt d·∫ßu gi√†u acid b√©o v√† ch·∫•t ch·ªëng oxy h√≥a...",
  "dich chiet dua": "ü•• D·ªãch chi·∫øt d·ª´a ch·ª©a acid lauric, vitamin E...",
  "dich chiet kiwi": "ü•ù D·ªãch chi·∫øt kiwi gi√†u vitamin C v√† ch·∫•t ch·ªëng oxy h√≥a...",
  "dua": "ü•• Qu·∫£ d·ª´a t∆∞∆°i, n∆∞·ªõc d·ª´a ng·ªçt nh·∫π...",
  "Fructose": "üç¨ ƒê∆∞·ªùng tr√°i c√¢y Fructose, tinh th·ªÉ tr·∫Øng, v·ªã ng·ªçt thanh...",
  "Glucose": "üç≠ ƒê∆∞·ªùng Glucose, tinh th·ªÉ tr·∫Øng, v·ªã ng·ªçt nh·∫π...",
  "green ppt": "üíö K·∫øt t·ªßa xanh l·ª•c trong c√°c ph·∫£n ·ª©ng ion kim lo·∫°i...",
  "kiwi": "ü•ù Qu·∫£ kiwi t∆∞∆°i, v·ªã chua ng·ªçt, gi√†u vitamin C...",
  "nuoc": "üíß N∆∞·ªõc tinh khi·∫øt, dung m√¥i ph·ªï bi·∫øn...",
  "objects": "üì¶ M·∫´u v·∫≠t ho·∫∑c d·ª•ng c·ª• trong th√≠ nghi·ªám...",
  "Orange red ppt": "üß° K·∫øt t·ªßa cam ƒë·ªè, th∆∞·ªùng trong ph·∫£n ·ª©ng kim lo·∫°i...",
  "sea": "üåä M·∫´u n∆∞·ªõc bi·ªÉn ho·∫∑c dung d·ªãch mu·ªëi kho√°ng...",
  "starch": "üåæ Tinh b·ªôt, dung d·ªãch ƒë·ª•c, ph·∫£n ·ª©ng xanh t√≠m v·ªõi iod...",
  "sua": "ü•õ S·ªØa, m√†u tr·∫Øng ƒë·ª•c, gi√†u dinh d∆∞·ª°ng...",
  "Sucrose": "üç¨ ƒê∆∞·ªùng m√≠a, tinh th·ªÉ tr·∫Øng, ng·ªçt ƒë·∫≠m...",
  "yellow": "üü° Dung d·ªãch v√†ng, c√≥ th·ªÉ l√† ph·∫£n ·ª©ng h·ªØu c∆° ho·∫∑c kim lo·∫°i..."
};


    productDesc.textContent = descDefaultGuide;

    function loadModel() {
      labels = [];
      ort.InferenceSession.create(currentModel, { executionProviders: ["wasm"] })
        .then(s => { session = s; console.log("‚úÖ M√¥ h√¨nh ƒë√£ s·∫µn s√†ng:", currentModel); })
        .catch(err => console.error("‚ùå L·ªói t·∫£i m√¥ h√¨nh:", err));

      fetch(currentClasses)
        .then(res => res.text())
        .then(txt => { labels = txt.split("\n").map(x => x.trim()).filter(x => x); })
        .catch(() => alert("Kh√¥ng t√¨m th·∫•y file nh√£n!"));
    }

    loadModel();

    btnLong.onclick = () => {
      currentModel = "merged_model_long.onnx";
      currentClasses = "classes_long.txt";
      datasetName.textContent = "L·ªèng";
      btnLong.classList.add("active");
      btnRan.classList.remove("active");
      loadModel();
      resetUI();
      productDesc.textContent = descDefaultGuide;
    };

    btnRan.onclick = () => {
      currentModel = "merged_model_ran.onnx";
      currentClasses = "classes_ran.txt";
      datasetName.textContent = "R·∫Øn";
      btnRan.classList.add("active");
      btnLong.classList.remove("active");
      loadModel();
      resetUI();
      productDesc.textContent = descDefaultGuide;
    };

    function resetUI(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      resultBox.innerHTML = "üîç Ch∆∞a c√≥ k·∫øt qu·∫£ nh·∫≠n di·ªán.";
      objectCountEl.textContent = 0;
      confidenceEl.textContent = "--%";
      objectLabelEl.textContent = "--";
      processTimeEl.textContent = "-- ms";
      productDesc.textContent = descDefaultGuide;
    }

    imageInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = ev => {
        img.onload = () => {
          canvas.width = img.width;
          canvas.height = img.height;
          ctx.drawImage(img, 0, 0);
        };
        img.src = ev.target.result;
      };
      reader.readAsDataURL(file);
    });

    detectBtn.addEventListener("click", async () => {
      if (!session) return alert("‚ö†Ô∏è M√¥ h√¨nh ch∆∞a s·∫µn s√†ng!");
      if (!img.src) return alert("‚ö†Ô∏è Ch∆∞a ch·ªçn ·∫£nh!");

      const start = performance.now();
      const { inputTensor, ratio, pad } = preprocess(img);
      const output = await session.run({ [session.inputNames[0]]: inputTensor });
      const data = output[session.outputNames[0]].data;
      const boxes = postprocess(data, ratio, pad, img.width, img.height);
      const time = (performance.now() - start).toFixed(1);

      // Kh√¥ng c·∫ßn v·∫Ω bounding box
      ctx.drawImage(img, 0, 0, img.width, img.height);
      updateInfo(boxes, time);
    });

    function preprocess(image) {
      const size = 640;
      const tmp = document.createElement("canvas");
      const ctx2 = tmp.getContext("2d");
      tmp.width = tmp.height = size;
      const scale = Math.min(size / image.width, size / image.height);
      const newW = image.width * scale, newH = image.height * scale;
      const dx = (size - newW) / 2, dy = (size - newH) / 2;
      ctx2.fillStyle = "black"; ctx2.fillRect(0, 0, size, size);
      ctx2.drawImage(image, dx, dy, newW, newH);
      const imgData = ctx2.getImageData(0, 0, size, size).data;
      const float32 = new Float32Array(3 * size * size);
      for (let i = 0; i < size * size; i++) {
        float32[i] = imgData[i * 4] / 255;
        float32[i + size * size] = imgData[i * 4 + 1] / 255;
        float32[i + 2 * size * size] = imgData[i * 4 + 2] / 255;
      }
      return { inputTensor: new ort.Tensor("float32", float32, [1, 3, size, size]), ratio: scale, pad: [dx, dy] };
    }

    function postprocess(data, ratio, pad, w, h) {
      const boxes = [];
      for (let i = 0; i < data.length; i += 6) {
        const [x1, y1, x2, y2, score, cls] = data.slice(i, i + 6);
        if (score < 0.4) continue;
        boxes.push({ score, cls });
      }
      return boxes.sort((a, b) => b.score - a.score);
    }

    function updateInfo(boxes, time) {
      objectCountEl.textContent = boxes.length;
      processTimeEl.textContent = `${time} ms`;

      if (!boxes.length) {
        resultBox.innerHTML = "üòï Kh√¥ng ph√°t hi·ªán v·∫≠t th·ªÉ n√†o.";
        productDesc.textContent = descDefaultGuide;
        return;
      }

const best = boxes[0];
const labelIndex = Math.round(best.cls);
const label = labels[labelIndex] || "Kh√¥ng x√°c ƒë·ªãnh";

confidenceEl.textContent = (best.score * 100).toFixed(1) + "%";
objectLabelEl.textContent = label;

// ‚úÖ Ch·ªâ ch·∫°y toLowerCase khi label h·ª£p l·ªá
if (label && label !== "Kh√¥ng x√°c ƒë·ªãnh" && labelDescriptions[label.toLowerCase()]) {
  productDesc.textContent = labelDescriptions[label.toLowerCase()];
} else {
  productDesc.textContent = (datasetName.textContent === "R·∫Øn") ? defaultDescRan : defaultDescLong;
}

// ‚úÖ Hi·ªÉn th·ªã danh s√°ch nh√£n duy nh·∫•t
const uniqueLabels = {};
boxes.forEach(b => {
  const li = Math.round(b.cls);
  const l = labels[li] || "Kh√¥ng x√°c ƒë·ªãnh";
  if (!uniqueLabels[l] || b.score > uniqueLabels[l]) {
    uniqueLabels[l] = b.score;
  }
});

resultBox.innerHTML = Object.entries(uniqueLabels).map(([label, score]) => `
  <div class='label-item'>
    <div class='label-name'>${label}</div>
    <div class='desc'>ƒê·ªô tin c·∫≠y: ${(score * 100).toFixed(1)}%</div>
  </div>
`).join("");

    }
  </script>
</body>
</html>
